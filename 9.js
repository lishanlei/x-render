(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"36SN":function(se,I,v){"use strict";v.r(I),v.d(I,"Column",function(){return be}),v.d(I,"Line",function(){return he}),v.d(I,"PivotTable",function(){return Ee});var j=v("k1fw"),M=v("PpiC"),ce=v("jGLd"),pe=v("rCx4"),_=v("q1tI");function Z(e){var i=[],O=[];return e.forEach(t=>{t.isDim?i.push(t):O.push(t)}),{metaDim:i,metaInd:O}}function J(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12;return+parseFloat(e==null?void 0:e.toPrecision(i))}var x=v("nKUr"),U=()=>Object(x.jsx)("div",{style:{color:"rgba(0,0,0,.85)",backgroundColor:"#fff2f0",fontSize:14,border:"1px solid #ffccc7",padding:"8px 15px"},children:"\u2757\uFE0F\u4F20\u5165\u7684\u6307\u6807\u6570\u76EE\u6709\u8BEF\uFF01"});function ee(e,i){var O=Z(e),t=O.metaDim,a=O.metaInd;if(a.length>=1&&t.length===0){var s="type",m="value";return{xField:s,yField:m,data:i.map(u=>a.map(d=>{var g=d.id,T=d.name;return{[s]:g,[m]:u[g]}})).flat(),meta:{[s]:{formatter:u=>{var d;return((d=e.find(g=>{var T=g.id;return u===T}))===null||d===void 0?void 0:d.name)||u}}},tooltip:{formatter:u=>{var d,g=u[s],T=u[m];return{name:(d=e.find(P=>{var G=P.id;return g===G}))===null||d===void 0?void 0:d.name,value:T}}}}}else if(a.length===1&&t.length===1){var b,c,l,A=(b=t.shift())===null||b===void 0?void 0:b.id,h=(c=a.shift())===null||c===void 0?void 0:c.id;return{data:i,xField:A,yField:h,meta:{[h]:{alias:(l=e.find(u=>{var d=u.id;return d===h}))===null||l===void 0?void 0:l.name}}}}else if(a.length>1&&t.length===1){var R,K=(R=t.shift())===null||R===void 0?void 0:R.id,L="value",D="type";return{data:i.map(u=>a.map(d=>{var g=d.id,T=d.name;return{[K]:u[K],[L]:u[g],[D]:T}})).flat(),xField:K,yField:L,seriesField:D,isGroup:!0}}else if(a.length===1&&t.length===2){var E,C,S;return{data:i,xField:(E=t.shift())===null||E===void 0?void 0:E.id,yField:(C=a.shift())===null||C===void 0?void 0:C.id,seriesField:(S=t.shift())===null||S===void 0?void 0:S.id,isGroup:!0}}return{data:i,xField:"",yField:""}}var me=e=>{var i=e.className,O=e.style,t=e.meta,a=t===void 0?[]:t,s=e.data,m=s===void 0?[]:s,b=e.inverted,c=Object(M.default)(e,["className","style","meta","data","inverted"]);if(b){var l=ee(a,m),A=l.xField,h=l.yField,R=Object(M.default)(l,["xField","yField"]);return Object(x.jsx)(ce.a,Object(j.a)(Object(j.a)({xField:h,yField:A},R),{},{renderer:"svg",errorTemplate:()=>Object(x.jsx)(U,{})},c))}else return Object(x.jsx)(pe.a,Object(j.a)(Object(j.a)({},ee(a,m)),{},{renderer:"svg",errorTemplate:()=>Object(x.jsx)(U,{})},c))},be=me,te=v("sGjT"),fe=v("gbv1"),je=v("QLmL"),xe=v("u7H3");function ge(e,i){var O=Z(e),t=O.metaDim,a=O.metaInd;if(a.length===1&&t.length===1){var s,m=t.shift(),b=a.shift(),c=m.id,l=b.id;return{data:i,xField:c,yField:l,yAxis:{label:{formatter:n=>b.isRate?"".concat(J(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var p=n[c],f=n[l];return{name:b.name,value:b.isRate?"".concat(J(100*Number(f)),"%"):f}}},meta:{[l]:{alias:(s=e.find(n=>{var p=n.id;return p===l}))===null||s===void 0?void 0:s.name}}}}else if(a.length===1&&t.length===2){var A=t.shift(),h=a.shift(),R=t.shift(),K=A.id,L=h.id,D=R.id;return{data:i,xField:K,yField:L,seriesField:D,yAxis:{label:{formatter:n=>h.isRate?"".concat(J(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var p=n[D],f=n[L];return{name:p,value:h.isRate?"".concat(J(100*Number(f)),"%"):f}}}}}else if(a.length===2&&t.length===2){var E,C,S,u,d=i.map(n=>{var p=a[0].id,f=t[1].id,B=n[p],V=n[f],W=Object(M.default)(n,[p,f].map(te.a));return Object(j.a)({[t[1].id]:"".concat(V,"-").concat(a[0].name)},W)}),g=i.map(n=>{var p=a[1].id,f=t[1].id,B=n[p],V=n[f],W=Object(M.default)(n,[p,f].map(te.a));return Object(j.a)({[t[1].id]:"".concat(V,"-").concat(a[1].name)},W)});return{data:[g,d],geometryOptions:[{geometry:"line",seriesField:t[1].id},{geometry:"line",seriesField:t[1].id,lineStyle:{lineDash:[5,5]}}],xField:(E=t.shift())===null||E===void 0?void 0:E.id,yField:[(C=a.shift())===null||C===void 0?void 0:C.id,(S=a.shift())===null||S===void 0?void 0:S.id],seriesField:(u=t.shift())===null||u===void 0?void 0:u.id}}else if(a.length>1&&t.length===1){var T,P=(T=t.shift())===null||T===void 0?void 0:T.id,G="value",Y="type";return{data:i.map(n=>a.map(p=>{var f=p.id,B=p.name;return{[P]:n[P],[G]:n[f],[Y]:B}})).flat(),xField:P,yField:G,seriesField:Y}}return{data:i}}var Oe=e=>{var i=e.className,O=e.style,t=e.meta,a=t===void 0?[]:t,s=e.data,m=s===void 0?[]:s,b=e.withArea,c=Object(M.default)(e,["className","style","meta","data","withArea"]),l=ge(a,m);return b?Object(x.jsx)(fe.a,Object(j.a)(Object(j.a)({},l),{},{renderer:"svg",errorTemplate:()=>Object(x.jsx)(U,{})},c)):Array.isArray(l.yField)?Object(x.jsx)(je.a,Object(j.a)(Object(j.a)({},l),{},{renderer:"svg",errorTemplate:()=>Object(x.jsx)(U,{})},c)):Object(x.jsx)(xe.a,Object(j.a)(Object(j.a)({},l),{},{renderer:"svg",errorTemplate:()=>Object(x.jsx)(U,{})},c))},he=Oe,X=v("tJVT"),z=v("mA+x"),Te=v("aMEK"),Me=v("ARb9"),ye=e=>{var i=e.className,O=e.style,t=e.showSubtotal,a=t===void 0?!0:t,s=e.subtotalText,m=s===void 0?["\u603B\u8BA1","\u5C0F\u8BA1"]:s,b=e.meta,c=b===void 0?[]:b,l=e.data,A=l===void 0?[]:l,h=e.size,R=h===void 0?"middle":h,K=e.indicatorSide,L=K===void 0?"top":K,D=e.leftDimensionLength,E=D===void 0?c.length:D,C=e.leftExpandable,S=C===void 0?!1:C,u=e.topExpandable,d=u===void 0?!1:u,g=e.defaultExpandAll,T=g===void 0?!0:g,P=e.cellRender,G=Object(M.default)(e,["className","style","showSubtotal","subtotalText","meta","data","size","indicatorSide","leftDimensionLength","leftExpandable","topExpandable","defaultExpandAll","cellRender"]),Y=Object(_.useState)([]),n=Object(X.default)(Y,2),p=n[0],f=n[1],B=Object(_.useState)([]),V=Object(X.default)(B,2),W=V[0],Ce=V[1],ae=Z(c),$=ae.metaDim,re=ae.metaInd,w=re.map(r=>{var o=r.id,y=r.name,N=r.isRate;return{name:y,code:o,align:"right",expression:N?"AVG(".concat(o,")"):"SUM(".concat(o,")")}}),ne=$.filter((r,o)=>o<E),k=ne.map(r=>{var o=r.id;return o}),Se=Object(z.b)(A,k,{includeTopWrapper:!0,isExpand:S?r=>W.includes(r):void 0}),Ae=Object(z.d)(Se,{indicators:L==="left"?w:void 0,supportsExpand:S,expandKeys:W,onChangeExpandKeys:Ce,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?m[0]||"\u603B\u8BA1":m[1]||"\u5C0F\u8BA1"}):void 0}),Re=Object(X.default)(Ae,1),ie=Re[0],le=$.filter((r,o)=>o>=E),de=le.map(r=>{var o=r.id;return o}),Ne=Object(z.b)(A,de,{includeTopWrapper:!0,isExpand:d?r=>p.includes(r):void 0}),Ke=Object(z.d)(Ne,{indicators:L==="top"?w:void 0,supportsExpand:d,expandKeys:p,onChangeExpandKeys:f,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?m[0]||"\u603B\u8BA1":m[1]||"\u5C0F\u8BA1"}):void 0}),Le=Object(X.default)(Ke,1),oe=Le[0],De=Object(z.c)({data:A,leftCodes:k,topCodes:de,aggregate:Object(Te.a)(w)});return Object(x.jsx)("div",{style:O,className:"CR-PivotTable CR-PivotTable-".concat(R," ").concat(i||""),children:Object(x.jsx)(z.a,Object(j.a)({defaultColumnWidth:100,leftMetaColumns:$.filter(r=>{var o=r.id;return k.includes(o)}).map(r=>{var o=r.id,y=r.name;return{code:o,name:y}}),leftTree:ie.children,leftTotalNode:ie,topTree:oe.children,topTotalNode:oe,getValue:(r,o)=>{var y,N=(y=De.get(r.data.dataKey))===null||y===void 0?void 0:y.get(o.data.dataKey);return N==null?void 0:N[o.code]},render:(r,o,y)=>{var N;if(P){var ve=o.data.dataPath,Pe=ve===void 0?[]:ve,ue=y.data.dataPath,Fe=ue===void 0?[]:ue,q={};return Pe.forEach((H,Q)=>{var F;q[(F=ne[Q])===null||F===void 0?void 0:F.id]=H}),Fe.forEach((H,Q)=>{var F;q[(F=le[Q])===null||F===void 0?void 0:F.id]=H}),P(r,q,y.code)}return(N=re.find(H=>{var Q=H.id;return Q===y.code}))!==null&&N!==void 0&&N.isRate?"".concat(J(r*100).toFixed(2),"%"):r}},G))})},Ee=ye},ARb9:function(se,I,v){}}]);
